<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Maracuja Feature tester</title>
	<script type="text/javascript" src="/dojotoolkit/dojo/dojo.js"
		data-dojo-config="isDebug: true"></script>
	<script type="text/javascript">
dojo.registerModulePath('maracuja', '../../lego/maracuja');
require(['doh/runner', 'maracuja', 'dojo/domReady!'], function(doh, MC) {
	doh.registerGroup('gfx', [
			{
				name: 'background',
				runTest: function(t) {
					var color = 'rgb(0, 100, 234)';
					MC.Gfx.background(color);
					doh.is(color, MC.Gfx.background());
				}
			},
			{
				name: 'sprite',
				runTest: function(t) {
					var e = MC.e('DOM', {
						x: 20,
						y: 40,
						width: 16,
						height: 32,
						tileMap: {
							image: '/lego/maracuja/tests/mario.png',
							tileWidth: 16,
							tileHeight: 32
						},
						tileIndex: {
							x: 0,
							y: 0
						},
						onUpdate: function(self, sender, eventArgs) {
							self.move(self.x+1, self.y);
							self.layer.y--;
						}
					});
					MC.bind('update', function(self, sender, eventArgs) {
						document.getElementById('status').innerHTML = MC.getFPS() + ' fps';
					});
					MC.startUpdating();
				}
			}

		],
		function() { //setUp
			MC.init('scene');
		},
		function() { //tearDown
		}
	);
	doh.run();
});
	</script>
  </head>
  <body>
	<div id="scene" style="width: 600px; height: 400px;"></div>
	<div id="status"></div>
  </body>
</html>
